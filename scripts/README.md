# 📦 상품 더미 데이터 생성 스크립트

이 디렉토리는 상품 더미 데이터를 생성하는 스크립트를 포함하고 있습니다.

## 📋 스크립트 목록

### 1. `seed-products.ts`
이미지 없이 35개의 기본 상품을 추가합니다.

**실행:**
```bash
pnpm seed
```

**특징:**
- 빠른 실행 속도
- 이미지 업로드 없음
- 카테고리별 5개씩 총 35개 상품

---

### 2. `reset-and-seed-products.ts` ⭐ 추천
**모든 기존 상품을 삭제**하고 **이미지를 포함한 100개의 새로운 상품**을 생성합니다.

**실행:**
```bash
pnpm reset-seed
```

**기능:**
1. ✅ 모든 기존 상품 자동 삭제
2. ✅ 100개의 새로운 상품 생성
3. ✅ 각 상품마다 실제 이미지 업로드:
   - 메인 이미지 (필수)
   - 추가 이미지 1~3개 (랜덤)
   - 상세 설명 이미지 (50% 확률)
4. ✅ 다양한 카테고리 (15개)
5. ✅ 랜덤 배지 (NEW/HOT)
6. ✅ 랜덤 할인가

**소요 시간:**
- 약 5~10분 (네트워크 속도에 따라 다름)
- 각 상품마다 2~4개의 이미지 업로드

---

## 🚀 사전 준비

### 1. 백엔드 서버 실행 (필수!)

```bash
cd ../haulic
docker compose up -d
./gradlew bootRun --args='--spring.profiles.active=local'
```

**중요:** 반드시 `local` 프로필로 실행해야 로컬 파일 업로드가 작동합니다!

### 2. 환경 변수 설정

`.env.local` 파일에 다음 설정이 있는지 확인:

```bash
NEXT_PUBLIC_API_BASE_URL=http://localhost:18080
```

### 3. 의존성 설치

```bash
pnpm install
```

---

## 📊 생성되는 데이터

### 카테고리 (15개)
- 스낵/과자
- 음료
- 라면/즉석식품
- 초콜릿/캔디
- 아이스크림
- 생활용품
- 유제품
- 과일/채소
- 정육/계란
- 수산물/건어물
- 쌀/잡곡
- 냉동식품
- 베이커리/잼
- 조미료/오일
- 통조림/가공식품

### 상품 속성
- **이름:** 자동 생성 (형용사 + 제품명 + 용량)
- **가격:** 1,000원 ~ 20,000원 (랜덤)
- **재고:** 50 ~ 250개 (랜덤)
- **할인:** 30% 확률로 할인가 포함
- **배지:** 30% 확률로 NEW 또는 HOT
- **상태:** 모두 발행(published) 상태
- **활성화:** 모두 활성화

### 이미지 (reset-and-seed-products.ts)
- **메인 이미지:** 400x400px (필수)
- **추가 이미지:** 1~3개 (랜덤)
- **상세 이미지:** 50% 확률

이미지는 [Lorem Picsum](https://picsum.photos/)에서 자동 다운로드되어 백엔드로 업로드됩니다.

---

## 💡 사용 예시

### 시나리오 1: 빠른 테스트
```bash
# 이미지 없이 35개 상품만 빠르게 추가
pnpm seed
```

### 시나리오 2: 실제 데모 준비 (추천)
```bash
# 기존 데이터 전부 삭제하고 이미지 포함 100개 상품 생성
pnpm reset-seed
```

---

## ⚠️ 주의사항

1. **백엔드 서버가 반드시 실행 중이어야 합니다**
   - URL: `http://localhost:18080`
   - 프로필: `local` (필수!)

2. **reset-and-seed-products.ts는 모든 상품을 삭제합니다**
   - 운영 환경에서는 절대 사용하지 마세요!
   - 테스트/개발 환경 전용입니다

3. **네트워크 연결 필요**
   - Lorem Picsum에서 이미지 다운로드
   - 인터넷 연결이 필요합니다

4. **실행 시간**
   - `seed-products.ts`: ~10초
   - `reset-and-seed-products.ts`: ~5-10분

---

## 🐛 문제 해결

### "ECONNREFUSED" 에러
→ 백엔드 서버가 실행 중인지 확인하세요
```bash
cd ../haulic
./gradlew bootRun --args='--spring.profiles.active=local'
```

### 이미지 업로드 실패
→ 백엔드가 `local` 프로필로 실행 중인지 확인
→ `haulic/uploads/` 디렉토리가 존재하는지 확인
```bash
mkdir -p ../haulic/uploads
```

### "이미지 다운로드 실패" 메시지
→ 인터넷 연결을 확인하세요
→ 스크립트는 자동으로 컬러 이미지로 대체합니다

---

## 🔧 커스터마이징

스크립트를 수정하여:
- 생성할 상품 수 변경
- 카테고리 추가/제거
- 가격 범위 조정
- 이미지 소스 변경 (Lorem Picsum → 다른 서비스)

자유롭게 `scripts/reset-and-seed-products.ts` 파일을 수정하세요!
